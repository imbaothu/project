<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Project 1: Song.py File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Project 1
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('_song_8py.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#namespaces">Namespaces</a>  </div>
  <div class="headertitle"><div class="title">Song.py File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>This package defines the song class.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_song_1_1_song.html">Song.Song</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">The <a class="el" href="class_song_1_1_song.html" title="The Song.Song class.">Song.Song</a> class.  <a href="class_song_1_1_song.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="namespaces" name="namespaces"></a>
Namespaces</h2></td></tr>
<tr class="memitem:namespace_song" id="r_namespace_song"><td class="memItemLeft" align="right" valign="top">namespace &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_song.html">Song</a></td></tr>
<tr class="memdesc:namespace_song"><td class="mdescLeft">&#160;</td><td class="mdescRight">The <a class="el" href="namespace_song.html" title="The Song package.">Song</a> package. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h1><a class="anchor" id="description_song"></a>
Description</h1>
<p>This package defines the <a class="el" href="class_song_1_1_song.html" title="The Song.Song class.">Song.Song</a> class, which reads the formatted music score and produces a song. The music score is space-separated and formatted as below: </p><div class="fragment"><div class="line">num_of_samples</div>
<div class="line">num_of_instruments</div>
<div class="line">wave_type_1 envelope_type_1 instrument_amplitude_1 pan_angle_1</div>
<div class="line">wave_type_2 envelope_type_2 instrument_amplitude_2 pan_angle_2</div>
<div class="line">...</div>
<div class="line">wave_type_n envelope_type_n instrument_amplitude_n pan_angle_n</div>
<div class="line">note_1_instrument_index note_1_amplitude note_1_start_sample_index note_1_end_sample_index</div>
<div class="line">note_2_instrument_index note_2_amplitude note_2_start_sample_index note_2_end_sample_index</div>
<div class="line">...</div>
<div class="line">note_m_instrument_index note_m_amplitude note_m_start_sample_index note_m_end_sample_index</div>
</div><!-- fragment --><p> The music score specifies how many samples the song has (<b>num_of_samples</b>) and how many instruments are used (<b>num_of_instruments</b>). For each instrument, it specifies which wave type (<b>wave_type_x</b>) should be used to generate the wave sound, which envelope should be applied (<b>envelope_type_x</b>), the instrument amplitude (<b>instrument_amplitude_x</b>), and the pan angle (<b>pan_angle_x</b>). Then, it describes all the notes of a song. Each note has an instrument index (<b>note_x_instrument_index</b>), its own amplitude (<b>note_x_amplitude</b>), and from which sample (<b>note_x_start_sample_index</b>) to which sample (<b>note_x_end_sample_index</b>) that the note sounds in the song. For example, below is a simple do-re-mi-fa-so melody described using the above music score format: </p><div class="fragment"><div class="line">441001</div>
<div class="line">1</div>
<div class="line">1 2 0.8 0.02</div>
<div class="line">0 45 0.63 0 22004</div>
<div class="line">0 47 0.63 22050 44054</div>
<div class="line">0 48 0.63 44100 66104</div>
<div class="line">0 50 0.63 66150 88154</div>
<div class="line">0 52 0.63 88200 110204</div>
<div class="line">0 53 0.63 110250 132254</div>
<div class="line">0 55 0.63 132300 154304</div>
<div class="line">0 57 0.63 154350 176354</div>
<div class="line">0 59 0.63 176400 198404</div>
<div class="line">0 60 0.63 198450 220454</div>
<div class="line">0 62 0.63 220500 242504</div>
<div class="line">0 64 0.63 242550 264554</div>
<div class="line">0 65 0.63 264600 286604</div>
<div class="line">0 67 0.63 286650 308654</div>
<div class="line">0 69 0.63 308700 330704</div>
<div class="line">0 71 0.63 330750 352754</div>
<div class="line">0 72 0.63 352800 374804</div>
<div class="line">0 74 0.63 374850 396854</div>
<div class="line">0 76 0.63 396900 418904</div>
<div class="line">0 77 0.63 418950 440954</div>
</div><!-- fragment --><p> This song has 441001 samples and has only one instrument, which uses <a class="el" href="class_wave_1_1_sine_wave.html" title="The Wave.SineWave class.">Wave.SineWave</a> and ADSR envelope. The instrument amplitude is 0.8, and its pan angle is 0.02. It has 20 notes from notes 45 to 77 and is evenly distributed among the song samples.</p>
<p>To generate a song from this music score, we need to create audio samples for each instrument. Then, for each note, we generate the corresponding sound wave, apply the envelope if needed, and accumulate the sound wave into the audio samples. After processing all the notes for each instrument and at each time position, we compute the averaged value. For example, if there are five notes accumulated to the i-th sample, then the i-th sample should be divided by five. At least, for each instrument, we mix its audio data into stereo song data by using its own amplitude and pan angle.</p>
<h1><a class="anchor" id="libraries_song"></a>
Libraries/Modules</h1>
<ul>
<li>typing (from the standard library)<ul>
<li>access to TextIO, List, and Dict</li>
</ul>
</li>
<li><a class="el" href="namespace_wave.html" title="The Wave package.">Wave</a><ul>
<li>access to <a class="el" href="class_wave_1_1_base_wave.html" title="The Wave.BaseWave class.">Wave.BaseWave</a>, <a class="el" href="class_wave_1_1_sine_wave.html" title="The Wave.SineWave class.">Wave.SineWave</a>, <a class="el" href="class_wave_1_1_square_wave.html" title="The Wave.SquareWave class.">Wave.SquareWave</a>, <a class="el" href="class_wave_1_1_sawtooth_wave.html" title="The Wave.SawtoothWave class.">Wave.SawtoothWave</a>, <a class="el" href="class_wave_1_1_complex_wave.html" title="The Wave.ComplexWave class.">Wave.ComplexWave</a>, and <a class="el" href="class_wave_1_1_string_wave.html" title="The Wave.StringWave class.">Wave.StringWave</a></li>
</ul>
</li>
<li><a class="el" href="namespace_audio_processor.html" title="The AudioProcessor package.">AudioProcessor</a><ul>
<li>access to audio processing functions</li>
</ul>
</li>
<li><a class="el" href="namespace_data_structure.html" title="The DataStructure package.">DataStructure</a><ul>
<li>access to <a class="el" href="class_data_structure_1_1_array.html" title="The DataStructure.Array class.">DataStructure.Array</a></li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="notes_song"></a>
Notes</h1>
<ul>
<li>Comments should be Doxygen compatible.</li>
</ul>
<h1><a class="anchor" id="todo_song"></a>
TODO</h1>
<p>Your task is to implement the <a class="el" href="class_song_1_1_song.html" title="The Song.Song class.">Song.Song</a> class that inherits from <a class="el" href="class_wave_1_1_base_wave.html" title="The Wave.BaseWave class.">Wave.BaseWave</a>. The initializer of this class should take one parameter &ndash; the simple formatted music sheet, and use it to render a song accordingly. To break down the song rendering logic, we recommend the below helper methods:</p><ul>
<li><a class="el" href="class_song_1_1_song.html#a3d46d8a82bdbf8de8fe99f373dea66e8" title="A helper method to read a line from in_file and return it as an integer.">Song.Song._read_int()</a>: read a line from the input stream and parse it as an integer.</li>
<li><a class="el" href="class_song_1_1_song.html#a8c16e6129d3c069768de9fb987907db0" title="A helper method to read the instrument information form in_file and store it to instrument_info.">Song.Song._read_instrument_info()</a>: read the instrument information from the input stream.</li>
<li><a class="el" href="class_song_1_1_song.html#ada8c2275e727e50c729995e2ecac2f66" title="A helper method to generate an instrument note sound wave based on the input wave_type,...">Song.Song._generate_instrument_note_wave()</a>: generate the sound wave for an instrument note.</li>
<li><a class="el" href="class_song_1_1_song.html#ae45efed55c1b5a99049e79f79c334dc9" title="A helper method to read the instrument audio data from in_file and store it to audio_data.">Song.Song._read_instrument_audio_data()</a>: read the instrument audio sample data from the input stream and generate the audio samples.</li>
<li><a class="el" href="class_song_1_1_song.html#acc46e8900368c0273d1f6de2c1a057e3" title="A helper method to compute the average of the audio data by dividing the input audio data by the tota...">Song.Song._average_audio_data_samples()</a>: average the audio samples (dividing the sampled value by the total number of samples.)</li>
<li><a class="el" href="class_song_1_1_song.html#aa504ac9d4bf0d18ba863a03d39f56219" title="A helper method to mix the instrument audio data into a stereo sound.">Song.Song._mix_instrument_audio_in_song()</a>: mix the multiple instrument audio data into song stereo audio data.</li>
</ul>
<p>Then the <a class="el" href="namespace_song.html" title="The Song package.">Song</a>'s initializer should look like the one below: </p><div class="fragment"><div class="line"><span class="keyword">with</span> open(song_file, <span class="stringliteral">&#39;r&#39;</span>) <span class="keyword">as</span> in_file:</div>
<div class="line">    <span class="comment"># read the number of samples</span></div>
<div class="line">    num_samples = self._read_int(in_file)</div>
<div class="line">    <span class="comment"># read the number of channels</span></div>
<div class="line">    num_instruments = self._read_int(in_file)</div>
<div class="line">    <span class="comment"># initialize instrument info</span></div>
<div class="line">    instrument_info = [{<span class="stringliteral">&#39;wavetype&#39;</span>: 1, <span class="stringliteral">&#39;envelope&#39;</span>: 0, <span class="stringliteral">&#39;amplitude&#39;</span>: 1, <span class="stringliteral">&#39;pan&#39;</span>: 0} <span class="keywordflow">for</span> _ <span class="keywordflow">in</span> range(num_instruments)]</div>
<div class="line">    <span class="comment"># read the instrument info</span></div>
<div class="line">    self._read_instrument_info(in_file, instrument_info)</div>
<div class="line">    <span class="comment"># initialize instrument audio data to store the sum of all samples and the number of samples</span></div>
<div class="line">    audio_data = [Array(num_samples, 0) <span class="keywordflow">for</span> _ <span class="keywordflow">in</span> range(num_instruments)]</div>
<div class="line">    audio_num_samples = [Array(num_samples, 0) <span class="keywordflow">for</span> _ <span class="keywordflow">in</span> range(num_instruments)]</div>
<div class="line">    <span class="comment"># read the instrument audio data</span></div>
<div class="line">    self._read_instrument_audio_data(in_file, instrument_info, audio_data, audio_num_samples)</div>
<div class="line">    <span class="comment"># compute the average of the samples</span></div>
<div class="line">    self._average_audio_data_samples(audio_data, audio_num_samples)            </div>
<div class="line">    <span class="comment"># initialize the song audio data, which has two channels for stereo sound</span></div>
<div class="line">    super().__init__(num_samples, 2)</div>
<div class="line">    <span class="comment"># mix in instrument audio data into song stereo data</span></div>
<div class="line">    self._mix_instrument_audio_in_song(instrument_info, audio_data)</div>
</div><!-- fragment --><p> However, you are free to implement the <a class="el" href="class_song_1_1_song.html" title="The Song.Song class.">Song.Song</a> class in whatever way you want. If you don't like our recommendation, feel free to remove all the methods and implement your own <a class="el" href="class_song_1_1_song.html" title="The Song.Song class.">Song.Song</a> class as you desire. As long as it produces the same song, you will obtain the full score.</p>
<h1><a class="anchor" id="author_song"></a>
Author(s)</h1>
<ul>
<li>Created by SingChun Lee on 12/24/2023</li>
<li>Modified by SingChun Lee on 12/30/2023</li>
</ul>
<p>Copyright (c) 2023 Bucknell University. All rights reserved. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="_song_8py.html">Song.py</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0 </li>
  </ul>
</div>
</body>
</html>
